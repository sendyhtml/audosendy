<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuroraSystems - Command Center</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@300;500;600;700&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- AURORA THEME VARIABLES --- */
        :root {
            --bg-deep: #050508;
            --primary: #00f2ff;    /* Cyan */
            --secondary: #bc13fe;  /* Neon Purple */
            --accent: #ff2a6d;     /* Cyber Red */
            --text-main: #f0f0f0;
            --text-dim: #8899a6;
            --card-bg: rgba(20, 20, 25, 0.4);
            --card-border: 1px solid rgba(255, 255, 255, 0.08);
            --glass-blur: blur(20px);
            --max-width: 1000px;
        }

        /* --- BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 110px;
            /* Abstract Anime Background */
            background-image: url('https://files.catbox.moe/kzl42l.jpg'); /* Fallback / Placeholder */
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
        }

        /* Overlay to darken background */
        body::before {
            content: ''; position: fixed; inset: 0;
            background: rgba(3, 3, 5, 0.85);
            background: linear-gradient(to bottom, rgba(5,5,8,0.9), rgba(5,5,8,0.7));
            z-index: -1;
        }

        /* Scanlines */
        body::after {
            content: ''; position: fixed; inset: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none; z-index: -1;
        }

        h1, h2, h3, h4 { font-family: 'Rajdhani', sans-serif; text-transform: uppercase; }

        .container { width: 100%; max-width: var(--max-width); margin: 0 auto; padding: 20px; }
        .dashboard-grid { display: flex; flex-direction: column; gap: 25px; }

        /* --- HEADER (HUD STYLE) --- */
        .header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 0 25px 0; border-bottom: 1px solid rgba(255,255,255,0.05);
            margin-bottom: 20px;
        }
        
        .profile-wrapper { display: flex; align-items: center; gap: 15px; cursor: pointer; }
        
        .avatar { 
            width: 50px; height: 50px; 
            /* Hexagon Shape */
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            background: var(--primary); padding: 2px;
            position: relative;
        }
        
        .avatar img { 
            width: 100%; height: 100%; object-fit: cover; 
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            background: #000;
        }

        .user-info h2 { 
            font-size: 20px; font-weight: 700; color: #fff; line-height: 1;
            font-family: 'Orbitron'; letter-spacing: 1px;
        }
        
        .user-info p { 
            font-size: 10px; color: var(--primary); letter-spacing: 2px; 
            margin-top: 4px; font-weight: 600;
        }

        .header-btn { 
            width: 45px; height: 45px; 
            background: rgba(255,255,255,0.03); 
            border: 1px solid rgba(255,255,255,0.1);
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            display: flex; align-items: center; justify-content: center;
            color: #fff; font-size: 18px; position: relative; cursor: pointer;
        }
        
        .notification-badge { 
            position: absolute; top: 8px; right: 8px; 
            width: 6px; height: 6px; background: var(--accent); 
            border-radius: 50%; box-shadow: 0 0 8px var(--accent);
        }

        /* --- CARDS & PANELS --- */
        .glass-panel {
            background: var(--card-bg); 
            backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur);
            border: var(--card-border);
            border-radius: 4px; /* Minimal rounded */
            position: relative;
        }

        /* --- HERO CARD (SYSTEM CORE) --- */
        .hero-card {
            padding: 25px; 
            border: 1px solid rgba(0, 242, 255, 0.2);
            background: linear-gradient(135deg, rgba(0, 242, 255, 0.05), rgba(188, 19, 254, 0.05));
            overflow: hidden;
            /* Cut Corner Tech Style */
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 20px), calc(100% - 20px) 100%, 
                0 100%, 0 20px
            );
        }

        /* Tech decorative lines */
        .hero-card::before {
            content: 'SYSTEM // ONLINE';
            position: absolute; top: 10px; right: 15px;
            font-size: 9px; letter-spacing: 2px; color: var(--primary); opacity: 0.7;
            font-family: 'Orbitron';
        }

        .hero-content { position: relative; z-index: 2; display: flex; flex-direction: column; gap: 20px; }
        
        .status-badge { 
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 14px; background: rgba(0, 242, 255, 0.1); 
            border: 1px solid var(--primary); color: var(--primary);
            font-size: 10px; font-weight: 700; letter-spacing: 1px; 
            align-self: flex-start;
        }

        .balance-section .amount { 
            font-size: 36px; font-weight: 800; font-family: 'Rajdhani', sans-serif; 
            background: linear-gradient(to bottom, #fff, #aaa);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255,255,255,0.2);
            margin-top: 5px;
        }

        .hero-stats { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; 
            margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px;
        }
        
        .h-stat { 
            text-align: center;
        }
        .h-stat span { font-size: 9px; color: var(--text-dim); display: block; margin-bottom: 2px; }
        .h-stat strong { font-size: 16px; color: #fff; font-family: 'Orbitron'; }

        /* --- SECTION TITLE --- */
        .section-header { margin: 30px 0 15px 0; display: flex; align-items: center; gap: 10px; }
        .section-icon { color: var(--secondary); font-size: 14px; }
        .section-title { 
            font-size: 14px; color: #fff; font-weight: 700; letter-spacing: 2px; 
            font-family: 'Orbitron'; text-shadow: 0 0 10px rgba(188, 19, 254, 0.5);
        }
        .line-deco { flex: 1; height: 1px; background: linear-gradient(90deg, rgba(255,255,255,0.2), transparent); }

        /* --- NEWS GRID (HOLOGRAPHIC) --- */
        .news-wrapper {
            display: flex; overflow-x: auto; gap: 15px; padding-bottom: 10px;
            scroll-snap-type: x mandatory; scrollbar-width: none;
        }
        .news-wrapper::-webkit-scrollbar { display: none; }
        
        .news-card {
            flex: 0 0 85%; height: 160px;
            position: relative; scroll-snap-align: center;
            border-radius: 12px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .news-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .news-card:hover img { transform: scale(1.1); }
        
        .card-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, #000 10%, transparent);
            padding: 15px;
        }
        .card-title { font-family: 'Orbitron'; font-size: 14px; color: #fff; margin-bottom: 2px; }
        .card-sub { font-size: 10px; color: var(--primary); letter-spacing: 1px; }

        /* --- ACCOUNT GRID (DATA CHIPS) --- */
        .account-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 15px; position: relative;
            /* Angle clip */
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
        }
        
        .stat-card.main { 
            grid-column: span 2; 
            background: linear-gradient(90deg, rgba(188, 19, 254, 0.1), rgba(0,0,0,0));
            border-left: 2px solid var(--secondary);
        }

        .stat-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .stat-label { font-size: 10px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
        .stat-icon i { color: var(--text-main); font-size: 14px; }
        
        .stat-value { font-family: 'Orbitron'; font-size: 18px; color: #fff; }
        .stat-bar { height: 2px; width: 100%; background: #222; margin-top: 10px; position: relative; }
        .stat-bar-fill { height: 100%; position: absolute; box-shadow: 0 0 10px currentColor; }

        /* --- KEY VAULT --- */
        .key-info-box {
            background: rgba(0, 242, 255, 0.05);
            border: 1px dashed rgba(0, 242, 255, 0.3);
            padding: 20px; text-align: center; margin-top: 10px;
            display: none;
        }
        .key-value {
            font-family: 'Courier New', monospace; font-size: 16px; 
            color: var(--primary); background: #000; padding: 10px;
            border: 1px solid var(--primary); margin: 10px 0;
            letter-spacing: 1px; text-shadow: 0 0 5px var(--primary);
            word-break: break-all;
        }

        /* --- PILL NAVBAR --- */
        .nav-container {
            position: fixed; bottom: 25px; left: 0; width: 100%;
            display: flex; justify-content: center; z-index: 100; pointer-events: none;
        }
        
        .floating-nav {
            pointer-events: auto;
            background: rgba(10, 10, 15, 0.85);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.15);
            padding: 10px 30px; border-radius: 50px;
            display: flex; gap: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .nav-link {
            color: #666; text-decoration: none; display: flex; flex-direction: column; align-items: center;
            transition: 0.3s;
        }
        
        .nav-link i { font-size: 20px; margin-bottom: 2px; }
        
        .nav-link.active { color: var(--primary); }
        .nav-link.active i { transform: translateY(-3px); text-shadow: 0 0 15px var(--primary); }
        
        /* --- DESKTOP --- */
        @media (min-width: 1024px) {
            .news-wrapper { display: grid; grid-template-columns: repeat(3, 1fr); overflow: visible; }
            .news-card { flex: none; width: 100%; height: 180px; }
            .account-grid { grid-template-columns: repeat(3, 1fr); }
            .stat-card.main { grid-column: span 1; }
        }

        /* --- NOTIFICATIONS --- */
        .secret-notification {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            background: #000; border: 1px solid var(--secondary); padding: 30px;
            z-index: 2000; text-align: center; color: #fff;
            box-shadow: 0 0 50px rgba(188, 19, 254, 0.3);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 80%; max-width: 300px;
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
        }
        .secret-notification.show { transform: translate(-50%, -50%) scale(1); }
        .secret-close {
            background: var(--secondary); border: none; padding: 8px 20px; color: #fff;
            margin-top: 15px; font-family: 'Rajdhani'; font-weight: 700; cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        
        <header class="header">
            <div class="profile-wrapper" id="profile">
                <div class="avatar">
                    <img src="https://files.catbox.moe/kzl42l.jpg" alt="User">
                </div>
                <div class="user-info">
                    <p>PILOT ACCESS</p>
                    <h2 id="usernameDisplay">AURORA PILOT</h2>
                </div>
            </div>
            <button class="header-btn" id="notificationBtn">
                <i class="fa-solid fa-bell"></i>
                <div class="notification-badge"></div>
            </button>
        </header>

        <div class="dashboard-grid">
            
            <div class="main-panel">
                <div class="hero-card">
                    <div class="hero-content">
                        <div class="status-badge" id="statusBadge">
                            <i class="fa-solid fa-satellite-dish"></i> ONLINE
                        </div>
                        <div class="balance-section">
                            <h3 style="font-size:10px; color:var(--text-dim); margin-bottom:5px; letter-spacing: 2px;">SYSTEM VERSION</h3>
                            <div class="amount">V.5.0.1</div>
                        </div>
                        <div class="hero-stats">
                            <div class="h-stat"><span>REMAINING</span><strong id="userCount">0</strong></div>
                            <div class="h-stat"><span>LATENCY</span><strong id="pingValue" style="color:var(--secondary);">--ms</strong></div>
                            <div class="h-stat"><span>EXPIRATION</span><strong id="expDays" style="color:var(--primary);">0D</strong></div>
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <i class="fa-solid fa-bolt section-icon"></i>
                    <div class="section-title">LATEST INTEL</div>
                    <div class="line-deco"></div>
                </div>
                
                <div class="news-wrapper" id="carousel">
                    <div class="news-card">
                        <img src="https://files.catbox.moe/nu2azr.jpg" alt="News 1">
                        <div class="card-overlay">
                            <div class="card-title">Aurora Systems</div>
                            <div class="card-sub">Â© DEV BY SENDY</div>
                        </div>
                    </div>
                    <div class="news-card">
                        <img src="https://files.catbox.moe/8tvcjv.jpg" alt="News 2">
                        <div class="card-overlay">
                            <div class="card-title">System Patch</div>
                            <div class="card-sub">UPGRADE COMPLETE</div>
                        </div>
                    </div>
                    <div class="news-card">
                        <img src="https://files.catbox.moe/288fco.jpg" alt="News 3">
                        <div class="card-overlay">
                            <div class="card-title">Security Core</div>
                            <div class="card-sub">MAXIMUM SHIELD</div>
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <i class="fa-solid fa-microchip section-icon"></i>
                    <div class="section-title">PILOT DATA</div>
                    <div class="line-deco"></div>
                </div>
                
                <div class="account-grid">
                    <div class="stat-card main">
                        <div class="stat-header">
                            <span class="stat-label">Clearance Level</span>
                            <div class="stat-icon"><i class="fa-solid fa-crown" id="levelIcon"></i></div>
                        </div>
                        <div class="stat-value" id="accessLevel" style="color: var(--secondary);">LOADING...</div>
                        <div class="stat-bar"><div class="stat-bar-fill" id="levelProgress" style="width:30%; background:var(--secondary);"></div></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Valid Until</span>
                            <div class="stat-icon"><i class="fa-regular fa-clock"></i></div>
                        </div>
                        <div class="stat-value" id="expiredDate" style="font-size: 14px;">...</div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width:70%; background:#fff;"></div></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Firewall</span>
                            <div class="stat-icon"><i class="fa-solid fa-shield-cat"></i></div>
                        </div>
                        <div class="stat-value" style="color:var(--primary);">ACTIVE</div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width:100%; background:var(--primary);"></div></div>
                    </div>
                </div>

                <div class="key-info-box" id="keyInfoBox">
                    <div style="font-size:10px; color:#aaa; margin-bottom:5px; text-transform:uppercase;">Encrypted Access Token</div>
                    <div class="key-value" id="userKey">LOADING...</div>
                    <div style="font-size:9px; color:var(--accent);">DO NOT SHARE THIS KEY WITH ANYONE</div>
                </div>
            </div>
            
        </div>
    </div>

    <div class="nav-container">
        <nav class="floating-nav">
            <a href="/dashboard" class="nav-link active" data-page="home">
                <i class="fa-solid fa-border-all"></i>
            </a>
            <a href="/execution" class="nav-link" data-page="explore">
                <i class="fa-solid fa-terminal"></i>
            </a>
            <a href="https://t.me/AuroraSystems" target="_blank" class="nav-link">
                <i class="fa-brands fa-telegram"></i>
            </a>
            <a href="/logout" class="nav-link" data-page="settings">
                <i class="fa-solid fa-power-off"></i>
            </a>
        </nav>
    </div>

    <div class="secret-notification" id="secretNotification">
        <div style="font-size:30px; color:var(--secondary); margin-bottom:10px;"><i class="fa-solid fa-ghost"></i></div>
        <div style="font-family:'Orbitron'; font-size:16px; margin-bottom:10px;">GOD MODE</div>
        <div style="font-size:12px; color:#ccc; margin-bottom:15px;">
            Aurora Protocol Activated.<br>Welcome to the system core.
        </div>
        <button class="secret-close" id="secretClose">DISMISS</button>
    </div>

    <script>
        // === ORIGINAL LOGIC PRESERVED ===
        const carousel = document.getElementById('carousel');
        const notificationBadge = document.querySelector('.notification-badge');
        const statusBadge = document.getElementById('statusBadge');
        const pingElement = document.getElementById('pingValue');
        const userCountElement = document.getElementById('userCount');
        const secretNotification = document.getElementById('secretNotification');
        const profileElement = document.getElementById('profile');
        const keyInfoBox = document.getElementById('keyInfoBox');

        async function loadUserData() {
            try {
                console.log('Loading system data...');
                const response = await fetch('/api/user-data', { method: 'GET', credentials: 'same-origin' });
                if (response.status === 401) { window.location.href = '/login'; return; }
                if (response.status === 404) { window.location.href = '/login?msg=' + encodeURIComponent('User not found'); return; }
                
                const userData = await response.json();
                
                const usernameDisplay = document.getElementById('usernameDisplay');
                if (usernameDisplay) usernameDisplay.textContent = userData.username.toUpperCase();
                
                const remainingDays = userData.remainingDays;
                const userCount = document.getElementById('userCount');
                const expDays = document.getElementById('expDays');
                if (userCount) userCount.textContent = remainingDays;
                if (expDays) expDays.textContent = remainingDays + 'D';
                
                const accessLevel = document.getElementById('accessLevel');
                const levelIcon = document.getElementById('levelIcon');
                const levelProgress = document.getElementById('levelProgress');
                
                if (accessLevel) {
                    accessLevel.textContent = userData.accessLevel;
                    accessLevel.style.color = userData.levelColor;
                }
                if (levelIcon) levelIcon.className = userData.levelIcon;
                if (levelProgress) {
                    let width = 30;
                    if (remainingDays > 30) width = 100; else if (remainingDays > 7) width = 60;
                    levelProgress.style.width = width + '%';
                    levelProgress.style.background = userData.levelColor;
                }
                
                const expiredDate = document.getElementById('expiredDate');
                if (expiredDate) expiredDate.textContent = userData.formattedTime;
                
                const userKey = document.getElementById('userKey');
                if (userKey && userData.key) {
                    userKey.textContent = userData.key;
                    if (keyInfoBox) keyInfoBox.style.display = 'block';
                }
                
            } catch (error) {
                console.error('Error:', error);
                setTimeout(() => window.location.href = '/login?msg=' + encodeURIComponent('Session expired'), 2000);
            }
        }

        // Navigation & Interactions
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.getAttribute('href').startsWith('http') || this.getAttribute('href') === '/logout') return;
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    window.location.href = this.getAttribute('href');
                });
            });
        }

        function updateConnectionStatus() {
            if (!pingElement || !statusBadge) return;
            const newPing = Math.floor(Math.random() * 20) + 10;
            pingElement.textContent = `${newPing}ms`;
            if (newPing < 20) {
                statusBadge.innerHTML = '<i class="fa-solid fa-satellite-dish" style="margin-right:5px;"></i> ONLINE';
                statusBadge.style.color = 'var(--primary)'; statusBadge.style.borderColor = 'var(--primary)';
            } else {
                statusBadge.innerHTML = '<i class="fa-solid fa-triangle-exclamation" style="margin-right:5px;"></i> UNSTABLE';
                statusBadge.style.color = '#ff9f43'; statusBadge.style.borderColor = '#ff9f43';
            }
        }

        function setupInteractions() {
            let lastTap = 0;
            if (profileElement) {
                profileElement.addEventListener('click', (e) => {
                    const currentTime = new Date().getTime();
                    if (currentTime - lastTap < 500) secretNotification.classList.add('show');
                    lastTap = currentTime;
                });
            }
            const secretCloseBtn = document.getElementById('secretClose');
            if (secretCloseBtn) secretCloseBtn.addEventListener('click', () => secretNotification.classList.remove('show'));
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
            setupInteractions();
            loadUserData();
            setInterval(updateConnectionStatus, 3000);
            
            const currentPath = window.location.pathname;
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === currentPath) link.classList.add('active');
            });
        });
        
        setInterval(() => {
            const expDays = document.getElementById('expDays');
            const userCount = document.getElementById('userCount');
            if (expDays && userCount) {
                const currentDays = parseInt(expDays.textContent) || 0;
                if (currentDays > 0) { expDays.textContent = `${currentDays}D`; userCount.textContent = currentDays; }
            }
        }, 60000);
    </script>
</body>
</html>